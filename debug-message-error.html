<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>$message é”™è¯¯è¯Šæ–­å·¥å…·</title>
    <style>
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        margin: 0;
        padding: 20px;
        background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%);
        min-height: 100vh;
        color: #333;
      }

      .diagnostic-container {
        max-width: 900px;
        margin: 0 auto;
        background: rgba(255, 255, 255, 0.95);
        border-radius: 20px;
        padding: 30px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      }

      h1 {
        color: #dc2626;
        text-align: center;
        margin-bottom: 30px;
        font-size: 28px;
      }

      .error-info {
        background: #fef2f2;
        border: 2px solid #dc2626;
        border-radius: 12px;
        padding: 20px;
        margin: 20px 0;
      }

      .error-title {
        color: #dc2626;
        font-weight: bold;
        font-size: 18px;
        margin-bottom: 10px;
      }

      .diagnostic-section {
        background: #f0f9ff;
        border: 2px solid #0ea5e9;
        border-radius: 12px;
        padding: 20px;
        margin: 20px 0;
      }

      .diagnostic-title {
        color: #0ea5e9;
        font-weight: bold;
        font-size: 18px;
        margin-bottom: 15px;
      }

      .solution-section {
        background: #f0fdf4;
        border: 2px solid #16a34a;
        border-radius: 12px;
        padding: 20px;
        margin: 20px 0;
      }

      .solution-title {
        color: #16a34a;
        font-weight: bold;
        font-size: 18px;
        margin-bottom: 15px;
      }

      .code-block {
        background: #1e293b;
        color: #e2e8f0;
        padding: 15px;
        border-radius: 8px;
        font-family: "Monaco", "Menlo", "Ubuntu Mono", monospace;
        font-size: 14px;
        overflow-x: auto;
        margin: 10px 0;
      }

      .step {
        margin: 10px 0;
        padding: 15px;
        border-left: 4px solid #4f46e5;
        background: #f8fafc;
        border-radius: 0 8px 8px 0;
      }

      .warning {
        background: #fef3c7;
        border: 2px solid #f59e0b;
        color: #d97706;
        padding: 15px;
        border-radius: 8px;
        margin: 10px 0;
      }

      .highlight {
        background: #fbbf24;
        padding: 2px 6px;
        border-radius: 4px;
        font-weight: bold;
      }

      ul {
        padding-left: 20px;
      }

      li {
        margin: 8px 0;
        line-height: 1.6;
      }

      .debug-script {
        background: #1e1e2e;
        color: #cdd6f4;
        padding: 20px;
        border-radius: 12px;
        font-family: "Monaco", "Menlo", "Ubuntu Mono", monospace;
        font-size: 13px;
        margin: 15px 0;
        border: 2px solid #6c7086;
      }
    </style>
  </head>
  <body>
    <div class="diagnostic-container">
      <h1>ğŸ” TypeError: this.$message is not a function è¯Šæ–­å·¥å…·</h1>

      <div class="error-info">
        <div class="error-title">ğŸš¨ é”™è¯¯è¯¦æƒ…</div>
        <p>
          <strong>é”™è¯¯ç±»å‹ï¼š</strong> TypeError: this.$message is not a function
        </p>
        <p><strong>å‘ç”Ÿä½ç½®ï¼š</strong> bookmark.html</p>
        <p>
          <strong>å½±å“èŒƒå›´ï¼š</strong> Arco Design Vueç»„ä»¶ä¸­çš„Messageå…¨å±€æ–¹æ³•è°ƒç”¨
        </p>
        <p>
          <strong>ç—‡çŠ¶ï¼š</strong> ç»„ä»¶ä¸­ä½¿ç”¨
          this.$message.success()ã€this.$message.error() ç­‰æ–¹æ³•æ—¶æŠ¥é”™
        </p>
      </div>

      <div class="diagnostic-section">
        <div class="diagnostic-title">ğŸ” å¯èƒ½åŸå› åˆ†æ</div>

        <h3>1. æ—¶æœºé—®é¢˜ï¼ˆæœ€å¯èƒ½ï¼‰</h3>
        <ul>
          <li>ç»„ä»¶åœ¨Vueå®ä¾‹å®Œå…¨åˆå§‹åŒ–å‰è°ƒç”¨$message</li>
          <li>å¼‚æ­¥æ“ä½œä¸­ä¸¢å¤±äº†Vueå®ä¾‹çš„ä¸Šä¸‹æ–‡</li>
          <li>åœ¨æŸäº›ç”Ÿå‘½å‘¨æœŸé’©å­ä¸­è¿‡æ—©è°ƒç”¨</li>
        </ul>

        <h3>2. ä¸Šä¸‹æ–‡ä¸¢å¤±</h3>
        <ul>
          <li>åœ¨å›è°ƒå‡½æ•°ã€Promiseã€setTimeoutä¸­ä½¿ç”¨this.$message</li>
          <li>ç®­å¤´å‡½æ•° vs æ™®é€šå‡½æ•°çš„ä¸Šä¸‹æ–‡å·®å¼‚</li>
          <li>äº‹ä»¶å¤„ç†å™¨ä¸­çš„thisç»‘å®šé—®é¢˜</li>
        </ul>

        <h3>3. é…ç½®é—®é¢˜</h3>
        <ul>
          <li>Vueå®ä¾‹åˆ›å»ºæ—¶æœºä¸ç»„ä»¶æŒ‚è½½çš„ç«äº‰æ¡ä»¶</li>
          <li>HMRçƒ­é‡è½½å¯¼è‡´çš„çŠ¶æ€ä¸ä¸€è‡´</li>
          <li>å¤šä¸ªVueå®ä¾‹ä¹‹é—´çš„é…ç½®å†²çª</li>
        </ul>
      </div>

      <div class="solution-section">
        <div class="solution-title">ğŸ’¡ è§£å†³æ–¹æ¡ˆ</div>

        <h3>æ–¹æ¡ˆ1: æ·»åŠ å®‰å…¨æ£€æŸ¥ï¼ˆæ¨èï¼‰</h3>
        <div class="step">
          åœ¨æ‰€æœ‰ä½¿ç”¨ $message çš„åœ°æ–¹æ·»åŠ å®‰å…¨æ£€æŸ¥ï¼š
          <div class="code-block">
            // åŸæ¥çš„ä»£ç  this.$message.success("æ“ä½œæˆåŠŸ"); // ä¿®æ”¹ä¸ºå®‰å…¨ç‰ˆæœ¬
            if (this.$message) { this.$message.success("æ“ä½œæˆåŠŸ"); } else {
            console.log("æ“ä½œæˆåŠŸ"); // é™çº§å¤„ç† } // æˆ–è€…ä½¿ç”¨å¯é€‰é“¾ï¼ˆæ¨èï¼‰
            this.$message?.success?.("æ“ä½œæˆåŠŸ");
          </div>
        </div>

        <h3>æ–¹æ¡ˆ2: ç›´æ¥å¯¼å…¥ä½¿ç”¨</h3>
        <div class="step">
          åœ¨ç»„ä»¶ä¸­ç›´æ¥å¯¼å…¥Messageç»„ä»¶ï¼Œä¸ä¾èµ–å…¨å±€å±æ€§ï¼š
          <div class="code-block">
            // åœ¨ç»„ä»¶çš„ script éƒ¨åˆ†æ·»åŠ  import { Message } from
            '@arco-design/web-vue'; // ç„¶åç›´æ¥ä½¿ç”¨ Message.success("æ“ä½œæˆåŠŸ");
            Message.error("æ“ä½œå¤±è´¥");
          </div>
        </div>

        <h3>æ–¹æ¡ˆ3: å¢å¼ºå‹å…¨å±€é…ç½®</h3>
        <div class="step">
          åœ¨ main.js ä¸­æ·»åŠ æ›´robustçš„é…ç½®ï¼š
          <div class="code-block">
            import { createApp } from 'vue'; import App from './App.vue'; import
            ArcoVue from '@arco-design/web-vue'; import { Message } from
            '@arco-design/web-vue'; const app = createApp(App);
            app.use(ArcoVue); // å¢å¼ºå‹é…ç½® app.config.globalProperties.$message
            = Message; // æ·»åŠ å¤‡ç”¨æ–¹æ³• app.config.globalProperties.$safeMessage
            = { success: (msg) => Message?.success?.(msg) ||
            console.log('SUCCESS:', msg), error: (msg) => Message?.error?.(msg)
            || console.error('ERROR:', msg), warning: (msg) =>
            Message?.warning?.(msg) || console.warn('WARNING:', msg), info:
            (msg) => Message?.info?.(msg) || console.info('INFO:', msg) };
            app.mount('#app');
          </div>
        </div>
      </div>

      <div class="diagnostic-section">
        <div class="diagnostic-title">ğŸ› ï¸ è°ƒè¯•è„šæœ¬</div>
        <p>åœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­è¿è¡Œä»¥ä¸‹è„šæœ¬æ¥è¯Šæ–­é—®é¢˜ï¼š</p>

        <div class="debug-script">
          // æ£€æŸ¥Vueå®ä¾‹å’Œ$messageé…ç½® console.log('=== $message è¯Šæ–­æŠ¥å‘Š ===');
          console.log('1. æ£€æŸ¥Vueå®ä¾‹:', window.Vue || 'Vueæœªæ‰¾åˆ°');
          console.log('2. æ£€æŸ¥å½“å‰Vueåº”ç”¨:',
          document.querySelector('#app')?.__vue_app__ || 'åº”ç”¨å®ä¾‹æœªæ‰¾åˆ°'); //
          æ£€æŸ¥å…¨å±€å±æ€§ const app = document.querySelector('#app'); if (app &&
          app.__vue_app__) { const globalProps =
          app.__vue_app__.config.globalProperties; console.log('3.
          å…¨å±€å±æ€§ä¸­çš„$message:', globalProps.$message || 'æœªæ‰¾åˆ°');
          console.log('4. Messageç±»å‹:', typeof globalProps.$message);
          console.log('5. Messageæ–¹æ³•:', globalProps.$message ?
          Object.keys(globalProps.$message) : 'æ— '); } // æ£€æŸ¥Arco Design
          console.log('6. Arco Design Vue:', window.ArcoVue || 'æœªåŠ è½½'); //
          æµ‹è¯•Messageæ–¹æ³• try { const { Message } =
          require('@arco-design/web-vue'); console.log('7.
          ç›´æ¥å¯¼å…¥Messageæµ‹è¯•:', typeof Message); Message.info('è¯Šæ–­æµ‹è¯•æ¶ˆæ¯');
          } catch (e) { console.log('7. ç›´æ¥å¯¼å…¥Messageå¤±è´¥:', e.message); }
          console.log('=== è¯Šæ–­å®Œæˆ ===');
        </div>
      </div>

      <div class="warning">
        <strong>âš ï¸ ä¸´æ—¶è§£å†³æ–¹æ¡ˆï¼š</strong>
        å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œå¯ä»¥åœ¨å‡ºé”™çš„ç»„ä»¶ä¸­ä¸´æ—¶æ·»åŠ ï¼š
        <div
          class="code-block"
          style="margin-top: 10px; background: #4b5563; color: #f9fafb"
        >
          mounted() { // ç¡®ä¿ $message å¯ç”¨ if (!this.$message) {
          console.warn('$message not available, setting up fallback');
          this.$message = { success: (msg) => console.log('SUCCESS:', msg),
          error: (msg) => console.error('ERROR:', msg), warning: (msg) =>
          console.warn('WARNING:', msg), info: (msg) => console.info('INFO:',
          msg) }; } }
        </div>
      </div>

      <div style="text-align: center; margin-top: 40px; color: #6b7280">
        <p>ğŸ“‹ å¦‚æœé—®é¢˜æŒç»­å­˜åœ¨ï¼Œè¯·æä¾›å…·ä½“çš„é”™è¯¯å †æ ˆä¿¡æ¯å’Œè§¦å‘åœºæ™¯</p>
        <p style="font-size: 12px">
          LinuxDo Scripts - $message é”™è¯¯è¯Šæ–­å·¥å…· v2025.09.15
        </p>
      </div>
    </div>
  </body>
</html>
